<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Speak EU - Comprehensive European Conversations</title>
<style>
    /* Reset & base */
    * {
        box-sizing: border-box;
    }
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        user-select: none;
        background-color: var(--bg-color);
        color: var(--text-primary);
        transition: background-color 0.35s ease, color 0.35s ease;
    }
    :root {
        /* Light theme colors */
        --bg-color: #f5f7fa;
        --header-bg: #23329f;
        --header-text: #ffffff;
        --footer-bg: #1a237e;
        --footer-text: #e0e0e0;
        --card-bg: #ffffff;
        --card-shadow: rgba(35, 50, 159, 0.1);
        --text-primary: #222222;
        --text-secondary: #555555;
        --accent-blue: #415bd9;
        --accent-light-blue: #a7bbe9;
        --accent-hover-blue: #23329f;
        --border-color: #d3d9e8;
        --ad-bg: linear-gradient(45deg, #dde3f7, #b3bceb);
        --ad-border: #94a3b8;
    }
    @media(prefers-color-scheme: dark) {
        :root {
            /* Dark theme colors */
            --bg-color: #121217;
            --header-bg: #1a237e;
            --header-text: #cfd8dc;
            --footer-bg: #0b1367;
            --footer-text: #cfd8dc;
            --card-bg: #1e2131;
            --card-shadow: rgba(20, 25, 50, 0.7);
            --text-primary: #e0e0e0;
            --text-secondary: #a3a3a3;
            --accent-blue: #7c94f3;
            --accent-light-blue: #536dcf;
            --accent-hover-blue: #4a67d0;
            --border-color: #4a4f6b;
            --ad-bg: linear-gradient(45deg, #2b2f48, #3a3d5c);
            --ad-border: #5a67a0;
        }
    }
    /* Layout */
    body, #app-wrapper {
        display: flex;
        flex-direction: column;
        height: 100%;
        min-height: 100vh;
        max-width: 480px;
        margin: 0 auto;
        background-color: var(--bg-color);
        box-shadow: 0 0 20px rgba(0,0,0,0.08);
        border-radius: 12px;
        overflow: hidden;
        user-select: none;
    }
    header {
        background-color: var(--header-bg);
        color: var(--header-text);
        padding: 1.1rem 1.5rem;
        font-weight: 900;
        font-size: 1.9rem;
        text-align: center;
        letter-spacing: 0.11em;
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        user-select: none;
        text-transform: uppercase;
        font-family: 'Segoe UI Black', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        flex-shrink: 0;
    }
    main.container {
        flex: 1 1 auto;
        background: var(--bg-color);
        color: var(--text-primary);
        display: flex;
        flex-direction: column;
        padding: 20px 20px 0 20px;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        user-select: text;
    }
    h1.page-title {
        text-align: center;
        font-weight: 800;
        font-size: 1.9rem;
        margin: 0 0 12px 0;
        color: var(--accent-hover-blue);
        letter-spacing: 0.04em;
        user-select: none;
    }
    label {
        font-weight: 700;
        font-size: 1.05rem;
        margin-bottom: 8px;
        color: var(--accent-hover-blue);
        user-select: none;
        display: block;
    }
    select {
        width: 100%;
        padding: 11px 16px;
        font-size: 1.05rem;
        border: 2.5px solid var(--accent-light-blue);
        border-radius: 10px;
        outline: none;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: var(--accent-hover-blue);
        font-weight: 600;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background: white url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="8"><path fill="%234153bd" d="M1 1l6 6 6-6"/></svg>') no-repeat right 15px center / 14px 8px;
        cursor: pointer;
        box-shadow: inset 0 0 6px var(--accent-light-blue);
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
        user-select: none;
    }
    select:hover {
        border-color: var(--accent-blue);
        box-shadow: inset 0 0 8px var(--accent-blue);
    }
    select:focus {
        border-color: var(--accent-hover-blue);
        box-shadow: 0 0 10px var(--accent-hover-blue);
    }
    #practice-toggle {
        margin-top: 14px;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        user-select: none;
    }
    #practice-toggle label {
        font-weight: 600;
        font-size: 1.05rem;
        color: var(--accent-hover-blue);
        cursor: pointer;
    }
    #practice-toggle input[type=checkbox] {
        width: 20px;
        height: 20px;
        cursor: pointer;
    }
    .vocabulary-grid {
        margin-top: 20px;
        display: grid;
        grid-template-columns: 1fr;
        gap: 18px 0;
        overflow-anchor: none;
    }
    .word-card {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 18px 17px 22px 17px;
        box-shadow: 0 8px 25px var(--card-shadow);
        text-align: left;
        font-size: 0.95rem;
        transition: transform 0.23s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.23s ease;
        cursor: default;
        user-select: text;
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 7px;
        scroll-margin-top: 70px;
    }
    .word-card:hover,
    .word-card:focus-visible {
        transform: translateY(-5px);
        box-shadow: 0 14px 40px var(--accent-blue);
        outline-offset: 3px;
        outline: 2px solid var(--accent-hover-blue);
        z-index: 10;
    }
    .native-text {
        font-weight: 900;
        font-size: 1.15rem;
        color: var(--accent-hover-blue);
        white-space: pre-wrap;
        user-select: text;
    }
    .bangla-pronunciation {
        font-style: italic;
        font-weight: 700;
        color: var(--accent-blue);
        font-size: 1rem;
        white-space: pre-wrap;
        user-select: text;
    }
    .bangla-meaning {
        font-weight: 600;
        color: var(--text-secondary);
        font-size: 1rem;
        white-space: pre-wrap;
        line-height: 1.3;
        user-select: text;
    }
    .practice-btn {
        margin-top: auto;
        user-select: none;
        background-color: var(--accent-hover-blue);
        border: none;
        color: white;
        font-weight: 700;
        font-size: 0.9rem;
        border-radius: 10px;
        padding: 9px 16px;
        cursor: pointer;
        align-self: flex-start;
        box-shadow: 0 4px 12px var(--accent-blue);
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
        display: none;
    }
    .practice-btn:hover,
    .practice-btn:focus-visible {
        background-color: var(--accent-blue);
        box-shadow: 0 6px 22px var(--accent-hover-blue);
        outline: none;
    }
    .practice-active .practice-btn {
        display: block;
    }
    #ad-container {
        background: var(--ad-bg);
        border-radius: 14px;
        padding: 26px 24px;
        color: var(--text-primary);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        font-size: 1.1rem;
        text-align: center;
        font-weight: 700;
        letter-spacing: 0.05em;
        user-select: none;
        margin: 32px auto 20px auto;
        border: 2px dashed var(--ad-border);
        max-width: 440px;
    }
    footer {
        background-color: var(--footer-bg);
        color: var(--footer-text);
        text-align: center;
        padding: 1rem 1rem;
        font-size: 0.9rem;
        user-select: none;
        box-shadow: inset 0 2px 6px rgba(255, 255, 255, 0.15);
        letter-spacing: 0.05em;
        font-weight: 600;
        flex-shrink: 0;
        border-top: 1px solid var(--border-color);
    }
    /* Insert ads in grid every 5 cards */
    .ad-inline {
        background: var(--ad-bg);
        border-radius: 14px;
        padding: 18px 14px;
        color: var(--text-primary);
        box-shadow: 0 7px 22px rgba(0,0,0,0.1);
        font-size: 1rem;
        font-weight: 700;
        user-select: none;
        text-align: center;
        border: 2px dashed var(--ad-border);
        max-width: 100%;
    }
    /* Scrollbar for container */
    main.container::-webkit-scrollbar {
        width: 8px;
    }
    main.container::-webkit-scrollbar-thumb {
        background-color: var(--accent-light-blue);
        border-radius: 10px;
    }
    main.container::-webkit-scrollbar-track {
        background: transparent;
    }
    /* Accessibility focus outline */
    button:focus-visible, select:focus-visible {
        outline: 3px solid var(--accent-hover-blue);
        outline-offset: 3px;
    }
</style>
</head>
<body>
<header role="banner" aria-label="Speak EU Application Header">
    Speak EU
</header>

<main class="container" role="main" aria-label="Speak EU Language Learning Conversations" tabindex="0">
    <h1 class="page-title">Comprehensive European Conversations</h1>

    <label for="language-select">Select a Country / Language:</label>
    <select id="language-select" aria-label="Select language or country" aria-required="true" aria-describedby="help-text">
        <option value="0" selected>-- Please select a country --</option>
        <option value="russia">Russia</option>
        <option value="france">France</option>
        <option value="italy">Italy</option>
        <option value="all">All Countries</option>
    </select>
    <div id="help-text" class="visually-hidden">Use the dropdown to select a country to view conversation phrases.</div>

    <div id="ad-container" role="region" aria-label="Advertisement" aria-live="polite">
        🌟 Welcome to Speak EU! Select a country to start practical conversations designed for European expats and students. 🌟
        <br /><br />
        Sponsored by LearnEU - Your bridge to mastering European languages!
    </div>

    <div id="vocabulary-grid" class="vocabulary-grid" aria-live="polite" aria-atomic="true" aria-relevant="additions" hidden>
        <!-- Conversation cards go here -->
    </div>

    <div id="practice-toggle" hidden>
        <input type="checkbox" id="practice-mode" />
        <label for="practice-mode" title="Toggle listening practice mode">Enable Practice Mode 🔊</label>
    </div>
</main>

<footer role="contentinfo" aria-label="Speak EU Application Footer">
    &copy; 2024 Speak EU &mdash; Language Learning for European Expats and Students.
</footer>

<script>
    // Conversation data for Russia, France, Italy
    const russiaConversations = [
        {native:"Здравствуйте! Меня зовут Джон, я приехал учиться в университет.", banglaPronunciation:"Zdravstvuyte! Menya zovut John, ya priekhal uchitsya v universitet.", banglaMeaning:"হ্যালো! আমার নাম জন, আমি বিশ্ববিদ্যালয়ে পড়াশোনা করতে এসেছি।"},
        {native:"Где я могу снять квартиру недалеко от кампуса?", banglaPronunciation:"Gde ya mogu snyat kvartiru nedaleko ot kampusa?", banglaMeaning:"আমি ক্যাম্পাসের কাছে কোথায় ফ্ল্যাট ভাড়া নিতে পারি?"},
        {native:"Как получить студенческую визу?", banglaPronunciation:"Kak poluchit studencheskuyu vizu?", banglaMeaning:"আমি কীভাবে ছাত্র ভিসা পাবো?"},
        {native:"Во сколько начинаются занятия в университете?", banglaPronunciation:"Vo skol'ko nachinayutsya zanyatiya v universitete?", banglaMeaning:"বিশ্ববিদ্যালয়ে ক্লাস কখন শুরু হয়?"},
        {native:"Где находится ближайшая больница?", banglaPronunciation:"Gde nakhoditsya blizhayshaya bol'nitsa?", banglaMeaning:"নিকটতম হাসপাতাল কোথায়?"},
        {native:"Где можно купить проездной билет на автобус?", banglaPronunciation:"Gde mozhno kupit proyezdnoy bilet na avtobus?", banglaMeaning:"আমি কোথায় বাসের টিকিট কিনতে পারি?"},
        {native:"Как найти работу на неполный рабочий день?", banglaPronunciation:"Kak nayti rabotu na nepolnyy rabochiy den'?", banglaMeaning:"আমি পার্ট টাইম চাকুরি কোথায় পাবো?"},
        {native:"В какие часы работает районный офис миграции?", banglaPronunciation:"V kakie chasy rabotayet rayonnyy ofis migratsii?", banglaMeaning:"মাইগ্রেশন অফিস কখন খোলা থাকে?"},
        {native:"Где находится ближайшая мечеть?", banglaPronunciation:"Gde nakhoditsya blizhayshaya mechet?", banglaMeaning:"নিকটতম মসজিদ কোথায়?"},
        {native:"Как связаться с университетской администрацией?", banglaPronunciation:"Kak svyazat'sya s universitėṫskŏy administratsiey?", banglaMeaning:"আমি বিশ্ববিদ্যালয়ের প্রশাসনের সঙ্গে কিভাবে যোগাযোগ করব?"},
        {native:"Где можно купить продукты и хозяйственные товары?", banglaPronunciation:"Gde mozhno kupit produkty i khozyaystvennyye tovary?", banglaMeaning:"আমি কোথায় মুদি এবং দৈনন্দিন জিনিস কিনতে পারি?"},
        {native:"Как вызвать скорую помощь в экстренной ситуации?", banglaPronunciation:"Kak vyzvat skoruyu pomoshch v ekstrennoy situatsii?", banglaMeaning:"জরুরি অবস্থায় আমি কীভাবে অ্যাম্বুলেন্স ডাকব?"},
        {native:"Где находится отделение полиции?", banglaPronunciation:"Gde nakhoditsya otdelenie politsii?", banglaMeaning:"পুলিশ স্টেশন কোথায়?"},
        {native:"Можно ли получить консультацию на английском языке?", banglaPronunciation:"Mozhno li poluchit konsultatsiyu na angliyskom yazyke?", banglaMeaning:"আমার কি ইংরেজি ভাষায় পরামর্শ পাওয়া যাবে?"},
        {native:"Спасибо за помощь и поддержку!", banglaPronunciation:"Spasibo za pomoshch i podderzhku!", banglaMeaning:"সাহায্য এবং সমর্থনের জন্য ধন্যবাদ!"}
    ];
    const franceConversations = [
        {native:"Bonjour! Je m'appelle Marie, je viens d'arriver pour mes études.", banglaPronunciation:"বঁজুর! জ্য মা-পেল মারি, জ্য ভিয়ন্স ধারিভে পুর মে এটুড.", banglaMeaning:"হ্যালো! আমার নাম মারি, আমি পড়াশোনা করতে নতুন আগাছি।"},
        {native:"Où puis-je trouver un appartement proche de l'université?", banglaPronunciation:"উ পুই-জ় ত্রুভে উন আপার্তমঁ প্রক দে লুনিভার্সিতে?", banglaMeaning:"বিশ্ববিদ্যালয়ের কাছে আমি ফ্ল্যাট কোথায় পাবো?"},
        {native:"Comment demander un visa étudiant?", banglaPronunciation:"কোম্মঁ দমানে উন ভিসা এটুদিয়ঁ?", banglaMeaning:"আমি কীভাবে স্টুডেন্ট ভিসা চাই?"},
        {native:"À quelle heure commencent les cours?", banglaPronunciation:"আ কেল উর কমঁসে লে কুর?", banglaMeaning:"ক্লাস কখন শুরু হয়?"},
        {native:"Où est l'hôpital le plus proche?", banglaPronunciation:"উ এ ল'অপিতাল লে প্ল্যু প্রক?", banglaMeaning:"নিকটতম হাসপাতাল কোথায়?"},
        {native:"Comment acheter un ticket de bus?", banglaPronunciation:"কোম্মঁ আশতে উন টিকেট দে বুস?", banglaMeaning:"আমি বাসের টিকিট কোথায় কিনব?"},
        {native:"Comment trouver un travail à temps partiel?", banglaPronunciation:"কোম্মঁ ত্রুভে উন ত্রাভাই আ তঁ পার্সিয়েল?", banglaMeaning:"আমি পার্ট টাইম চাকুরি কোথায় পেতেছি?"},
        {native:"Quels sont les horaires du bureau d'immigration?", banglaPronunciation:"কেল সঁ লে জোরেয় দেন্য উ ব্যুরো দিমিগ্রাশি?", banglaMeaning:"ইমিগ্রেশনের অফিসের সময় কেমন?"},
        {native:"Où se trouve la mosquée la plus proche?", banglaPronunciation:"উ সে তুরভে লা মোস্কে লা প্ল্যু প্রক?", banglaMeaning:"নিকটতম মসজিদ কোথায়?"},
        {native:"Comment contacter l'administration universitaire?", banglaPronunciation:"কোম্মাঁ কনতেই ল্যাডমিনিস্ট্রাসিউঁ উনিভার্সিটার?", banglaMeaning:"বিশ্ববিদ্যালয়ের প্রশাসনের সাথে কিভাবে যোগাযোগ করব?"},
        {native:"Où acheter des produits alimentaires et des articles ménagers?", banglaPronunciation:"উ আশতে দে প্রোডুই আলিমঁতের আ দে জর্তিক মেনাজে?", banglaMeaning:"আমি কোথায় মুদি ও নিত্যপ্রয়োজনীয় জিনিস কিনব?"},
        {native:"Comment appeler les urgences en cas d'urgence?", banglaPronunciation:"কোম্মঁ আপেলে লে জুরঁগঁস আঁ কা দুরজঁস?", banglaMeaning:"জরুরি অবস্থায় কীভাবে সাহায্য চাই?"},
        {native:"Où se trouve le commissariat de police?", banglaPronunciation:"উ সে তুরভে লে কমিসারিয়া দে পলিস?", banglaMeaning:"পুলিশ স্টেশন কোথায়?"},
        {native:"Puis-je obtenir des services en anglais?", banglaPronunciation:"পুই-জ় অবতেনির দে সার্ভিস আংগলে?", banglaMeaning:"আমি কি ইংরেজিতে সেবা পেতে পারি?"},
        {native:"Merci beaucoup pour votre aide et votre soutien!", banglaPronunciation:"মের্সি বোকু পুর ভোত্র অ্যাড এ ভোত্র সুতেন!", banglaMeaning:"আপনার সাহায্য এবং সমর্থনের জন্য ধন্যবাদ!"}
    ];
    const italyConversations = [
        {native:"Ciao! Mi chiamo Marco, sono venuto per studiare.", banglaPronunciation:"চিয়াও! মি কিয়ামো মার্কো, সোনো ভেনুতো পুর স্টুদিয়ারে.", banglaMeaning:"হ্যালো! আমার নাম মার্কো, আমি পড়াশোনা করতে এসেছি।"},
        {native:"Dove posso trovare un appartamento vicino all'università?", banglaPronunciation:"দোভে পসো ত্রোভারে উন আপার্ততামেন্তো ভিচিনো আল্লুনিভেরসাতা?", banglaMeaning:"আমি বিশ্ববিদ্যালয়ের কাছে ফ্ল্যাট কোথায় পাবো?"},
        {native:"Come richiedere un visto studentesco?", banglaPronunciation:"কোমে রিকিয়েদেরে উন ভিস্টো স্টুদেনেস্কো?", banglaMeaning:"আমি কীভাবে ছাত্র ভিসা পাবো?"},
        {native:"A che ora iniziano le lezioni all'università?", banglaPronunciation:"আ কে উরা ইনিইজিয়ানো লে লেজিওনি আল্লুনিভেরসাতা?", banglaMeaning:"বিশ্ববিদ্যালয়ে ক্লাস কতটায় শুরু হয়?"},
        {native:"Dov’è l’ospedale più vicino?", banglaPronunciation:"দোভে ল’অস্পেদালের পিউ ভিচিনো?", banglaMeaning:"নিকটতম হাসপাতাল কোথায়?"},
        {native:"Dove posso comprare un biglietto dell'autobus?", banglaPronunciation:"দোভে পসো কমপ্রারে উন বিগলিয়েত্তো দেনাউতোবুস?", banglaMeaning:"আমি বাসের টিকিট কোথায় কিনব?"},
        {native:"Come posso trovare un lavoro part-time?", banglaPronunciation:"কোমে পসো ত্রোভারে উন লাভোর পার্ট-টাইম?", banglaMeaning:"আমি পার্ট টাইম জব কোথায় পাবো?"},
        {native:"Quali sono gli orari dell'ufficio immigrazione?", banglaPronunciation:"ক্বালি সোনো গলি ওরারি দেল্লুফিসিও ইমিগ্রাজিওনে?", banglaMeaning:"ইমিগ্রেশন অফিসের সময় কখন?"},
        {native:"Dov’è la moschea più vicina?", banglaPronunciation:"দোভে লা মোস্কেয়া পিউ ভিচিনা?", banglaMeaning:"নিকটতম মসজিদ কোথায়?"},
        {native:"Come contattare l'amministrazione universitaria?", banglaPronunciation:"কোমে কনটাতারে ল'আমমিনিস্ট্রাজিওনে উনিভেরসিটারিয়া?", banglaMeaning:"বিশ্ববিদ্যালয়ের প্রশাসনের সাথে কিভাবে যোগাযোগ করব?"},
        {native:"Dove posso comprare prodotti alimentari e articoli per la casa?", banglaPronunciation:"দোভে পসো কমপ্রারে প্রোডত্তি আলিমেনতারি এ আর্তিকোলি পর লা কাসা?", banglaMeaning:"আমি গুদাম ও বাড়ির জিনিসপত্র কোথায় কিনব?"},
        {native:"Come chiamare il pronto soccorso in caso di emergenza?", banglaPronunciation:"কোমে কিয়ামারে ইল প্রোন্তো সোকোরসো ইন কাসো দি এমারজেংজা?", banglaMeaning:"জরুরি অবস্থায় আমি কীভাবে অ্যাম্বুলেন্স ডাকব?"},
        {native:"Dov’è la stazione di polizia?", banglaPronunciation:"দোভে লা স্টাজিওনে দি পোলিজিয়া?", banglaMeaning:"পুলিশ স্টেশন কোথায়?"},
        {native:"Posso ricevere assistenza in inglese?", banglaPronunciation:"পসো রিচেভেরে আসিস্টেঁজা ইন ইঙ্গলেসে?", banglaMeaning:"আমি কি ইংরেজিতে সাহায্য পেতে পারি?"},
        {native:"Grazie mille per il vostro aiuto e supporto!", banglaPronunciation:"গ্রাজিয়ে মিললে পার ইল ভোস্ত্রো আইুঠো এ সופּপোর্তো!", banglaMeaning:"সহায্য ও সমর্থনের জন্য অনেক ধন্যবাদ!"}
    ];

    const conversationData = {
        russia: russiaConversations,
        france: franceConversations,
        italy: italyConversations
    };

    const languageSelect = document.getElementById('language-select');
    const vocabularyGrid = document.getElementById('vocabulary-grid');
    const adContainer = document.getElementById('ad-container');
    const practiceToggleContainer = document.getElementById('practice-toggle');
    const practiceCheckbox = document.getElementById('practice-mode');

    let practiceMode = false;

    const speechLangMap = {
        russia: 'ru-RU',
        france: 'fr-FR',
        italy: 'it-IT'
    };

    function clearHighlight() {
        document.querySelectorAll('.word-card.highlight').forEach(card=>{
            card.classList.remove('highlight');
        });
    }

    function createCard(convo, countryKey){
        const card = document.createElement('div');
        card.className = 'word-card';
        card.tabIndex = 0;
        card.innerHTML = `
            <div class="native-text" title="Native Text">${convo.native}</div>
            <div class="bangla-pronunciation" title="Bangla Pronunciation">${convo.banglaPronunciation}</div>
            <div class="bangla-meaning" title="Bangla Meaning">${convo.banglaMeaning}</div>
        `;
        if(practiceMode){
            const btn = document.createElement('button');
            btn.className = 'practice-btn';
            btn.type = 'button';
            btn.textContent = '🔊 Practice';
            btn.title = 'Click to hear and practice pronunciation';
            btn.addEventListener('click', () => {
                clearHighlight();
                card.classList.add('highlight');
                speakText(convo.native, speechLangMap[countryKey] || 'en-US');
            });
            card.appendChild(btn);
        }
        return card;
    }

    // Insert an inline ad element
    function createInlineAd() {
        const ad = document.createElement('div');
        ad.className = 'ad-inline';
        ad.setAttribute('role', 'complementary');
        ad.setAttribute('aria-label', 'Advertisement');
        ad.textContent = '🌐 Learn more languages and expand your European journey with LearnEU Premium! Visit learn-eu.example.com';
        return ad;
    }

    // Display conversations array with ads every 5 items
    function displayVocabulary(conversations, countryKey){
        vocabularyGrid.innerHTML = '';
        if(!conversations.length){
            vocabularyGrid.innerHTML='<p style="text-align:center; color:#777; font-style:italic;">কোনো কনভারসেশন পাওয়া যায়নি</p>';
            return;
        }
        conversations.forEach((convo, index) => {
            const card = createCard(convo, countryKey);
            vocabularyGrid.appendChild(card);
            // Insert ad every 5 cards except after last card
            if ((index + 1) % 5 === 0 && index !== conversations.length - 1) {
                vocabularyGrid.appendChild(createInlineAd());
            }
        });
    }

    function speakText(text, lang){
        if(!('speechSynthesis' in window)){
            alert('Sorry, your browser does not support speech synthesis.');
            return;
        }
        const synth = window.speechSynthesis;
        if (synth.speaking) {
            synth.cancel();
        }
        const utterThis = new SpeechSynthesisUtterance(text);
        utterThis.lang = lang;
        synth.speak(utterThis);
    }

    function loadVocabulary(){
        const selected = languageSelect.value;
        clearHighlight();

        if(selected === '0'){ // no selection
            vocabularyGrid.hidden = true;
            adContainer.hidden = false;
            practiceToggleContainer.hidden = true;
            practiceCheckbox.checked = false;
            practiceMode = false;
        } else {
            adContainer.hidden = true;
            vocabularyGrid.hidden = false;
            practiceToggleContainer.hidden = false;

            if(selected === 'all'){
                const allConvos = [
                    ...russiaConversations,
                    ...franceConversations,
                    ...italyConversations
                ];
                displayVocabulary(allConvos, '');
            } else {
                displayVocabulary(conversationData[selected] || [], selected);
            }
        }
    }

    function togglePracticeMode(){
        practiceMode = practiceCheckbox.checked;
        loadVocabulary();
    }

    (function init(){
        loadVocabulary();
        languageSelect.addEventListener('change', loadVocabulary);
        practiceCheckbox.addEventListener('change', togglePracticeMode);
    })();

    // Accessibility enhancements: Keyboard focus styling fix for Firefox
    // Using focus-visible polyfill would be recommended but omitted for simplicity here.
</script>

<!-- Accessibility helper: visually hidden class -->
<style>
.visually-hidden {
    border: 0 !important;
    clip: rect(1px,1px,1px,1px) !important;
    -webkit-clip-path: inset(50%) !important;
    clip-path: inset(50%) !important;
    height: 1px !important; 
    margin: -1px !important; 
    overflow: hidden !important;
    padding: 0 !important; 
    position: absolute !important; 
    width: 1px !important; 
    white-space: nowrap !important;
}
</style>

</body>
</html>

