<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speak EU - ржЗржЙрж░рзЛржкрзАржпрж╝ ржнрж╛рж╖рж╛ рж╢рж┐ржЦрзБржи</title>
    
    <!-- PWA Meta -->
    <meta name="theme-color" content="#3742fa">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+Bengali:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">ЁЯЧ║я╕П</div>
            <h1>Speak EU</h1>
            <div class="loading-spinner"></div>
            <p>ржЗржЙрж░рзЛржкрзАржпрж╝ ржнрж╛рж╖рж╛ рж╢рзЗржЦрж╛рж░ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...</p>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app hidden">
        <!-- Mobile Header -->
        <header class="mobile-header">
            <button id="menuToggle" class="menu-toggle">тШ░</button>
            <h1 class="app-title">ЁЯЧ║я╕П Speak EU</h1>
            <button id="themeToggle" class="theme-toggle">ЁЯМЩ</button>
        </header>

        <!-- Navigation -->
        <nav id="navigation" class="navigation">
            <a href="#home" class="nav-item active" data-section="home">
                <span class="nav-icon">ЁЯПа</span>
                <span class="nav-text">рж╣рзЛржо</span>
            </a>
            <a href="#languages" class="nav-item" data-section="languages">
                <span class="nav-icon">ЁЯМН</span>
                <span class="nav-text">ржнрж╛рж╖рж╛</span>
            </a>
            <a href="#learn" class="nav-item" data-section="learn">
                <span class="nav-icon">ЁЯУЪ</span>
                <span class="nav-text">рж╢рж┐ржЦрзБржи</span>
            </a>
            <a href="#progress" class="nav-item" data-section="progress">
                <span class="nav-icon">ЁЯУК</span>
                <span class="nav-text">ржЕржЧрзНрж░ржЧрждрж┐</span>
            </a>
        </nav>

        <!-- Content Sections -->
        <main class="main-content">
            <!-- Home Section -->
            <section id="homeSection" class="content-section active">
                <div class="hero">
                    <h1 class="hero-title">ржЗржЙрж░рзЛржкрзАржпрж╝ ржнрж╛рж╖рж╛ рж╢рж┐ржЦрзБржи</h1>
                    <p class="hero-subtitle">рзирзоржЯрж┐ ржжрзЗрж╢рзЗрж░ ржнрж╛рж╖рж╛ тАв рзз,рзкрзж,рзжрзжрзж+ рж╢ржмрзНржж тАв ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рзА ржкрзНрж░ржмрж╛рж╕рзАржжрзЗрж░ ржЬржирзНржп</p>
                    
                    <div class="stats">
                        <div class="stat">
                            <div class="stat-number">28</div>
                            <div class="stat-label">ржжрзЗрж╢</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">140K+</div>
                            <div class="stat-label">рж╢ржмрзНржж</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">23</div>
                            <div class="stat-label">ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐</div>
                        </div>
                    </div>
                    
                    <div class="hero-actions">
                        <button class="btn btn-primary" onclick="app.navigateToSection('learn')">
                            ЁЯЪА рж╢рзЗржЦрж╛ рж╢рзБрж░рзБ ржХрж░рзБржи
                        </button>
                        <button class="btn btn-outline" onclick="app.navigateToSection('languages')">
                            ЁЯМН ржнрж╛рж╖рж╛ ржжрзЗржЦрзБржи
                        </button>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="section">
                    <h2 class="section-title">тЪб ржжрзНрж░рзБржд ржХрж╛ржЬ</h2>
                    <div class="quick-actions" id="quickActions">
                        <!-- Quick actions will be loaded here -->
                    </div>
                </div>

                <!-- Popular Languages -->
                <div class="section">
                    <h2 class="section-title">ЁЯФе ржЬржиржкрзНрж░рж┐ржпрж╝ ржнрж╛рж╖рж╛</h2>
                    <div class="languages-grid" id="popularLanguages">
                        <!-- Popular languages will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Languages Section -->
            <section id="languagesSection" class="content-section">
                <h1 class="page-title">ЁЯМН ржЗржЙрж░рзЛржкрзАржпрж╝ ржнрж╛рж╖рж╛ рждрж╛рж▓рж┐ржХрж╛</h1>
                
                <!-- Search -->
                <div class="search-container">
                    <input type="text" id="languageSearch" placeholder="ржнрж╛рж╖рж╛ ржмрж╛ ржжрзЗрж╢рзЗрж░ ржирж╛ржо рж▓рж┐ржЦрзБржи..." class="search-input">
                </div>

                <!-- Filters -->
                <div class="filters">
                    <button class="filter-btn active" data-filter="all">рж╕ржм ржнрж╛рж╖рж╛</button>
                    <button class="filter-btn" data-filter="popular">ржЬржиржкрзНрж░рж┐ржпрж╝</button>
                    <button class="filter-btn" data-filter="schengen">рж╢рзЗржиржЧрзЗржи</button>
                </div>

                <!-- Languages Grid -->
                <div class="languages-grid" id="languagesGrid">
                    <!-- Languages will be loaded here -->
                </div>
            </section>

            <!-- Learn Section -->
            <section id="learnSection" class="content-section">
                <h1 class="page-title">ЁЯУЪ ржнрж╛рж╖рж╛ рж╢рж┐ржЦрзБржи</h1>
                
                <!-- Language Selection -->
                <div id="languageSelection" class="language-selection">
                    <label for="languageSelect">ржнрж╛рж╖рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи:</label>
                    <select id="languageSelect" class="language-select">
                        <option value="">ржПржХржЯрж┐ ржнрж╛рж╖рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи...</option>
                    </select>
                </div>

                <!-- Learning Interface -->
                <div id="learningInterface" class="learning-interface hidden">
                    <div class="learning-header">
                        <div class="language-info">
                            <span id="currentLanguageFlag">ЁЯЗйЁЯЗк</span>
                            <h2 id="currentLanguageName">ржЬрж╛рж░рзНржорж╛ржи</h2>
                        </div>
                        <div class="progress-info">
                            <span>ржЖржЬ рж╢рж┐ржЦрзЗржЫрж┐: <span id="todayLearned">0</span></span>
                        </div>
                    </div>

                    <!-- Vocabulary List -->
                    <div id="vocabularyList" class="vocabulary-list">
                        <!-- Vocabulary will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Progress Section -->
            <section id="progressSection" class="content-section">
                <h1 class="page-title">ЁЯУК ржЖржкржирж╛рж░ ржЕржЧрзНрж░ржЧрждрж┐</h1>
                <div id="progressContent">
                    <p>ржЕржЧрзНрж░ржЧрждрж┐рж░ рждржерзНржп рж╢рзАржШрзНрж░ржЗ ржЖрж╕ржЫрзЗ...</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- JavaScript -->
    <script>
        console.log('ЁЯЪА Starting Speak EU...');
        
        // Simple error-free version
        class SpeakEU {
            constructor() {
                this.currentLanguage = null;
                this.currentSection = 'home';
                this.vocabularyData = new Map();
                this.isReady = false;
                
                console.log('тЬЕ SpeakEU instance created');
            }

            async init() {
                try {
                    console.log('ЁЯФз Initializing...');
                    
                    // Hide loading screen
                    setTimeout(() => {
                        document.getElementById('loadingScreen').style.display = 'none';
                        document.getElementById('app').classList.remove('hidden');
                        console.log('тЬЕ App loaded successfully');
                    }, 2000);
                    
                    // Setup navigation
                    this.setupNavigation();
                    
                    // Load initial content
                    this.loadHomeContent();
                    
                    // Setup theme toggle
                    this.setupThemeToggle();
                    
                    this.isReady = true;
                    this.showToast('рж╕рзНржмрж╛ржЧрждржо! Speak EU рждрзЗ ржЖржкржирж╛ржХрзЗ рж╕рзНржмрж╛ржЧржд ржЬрж╛ржирж╛ржЗ', 'success');
                    
                } catch (error) {
                    console.error('тЭМ Init error:', error);
                    this.handleError();
                }
            }

            setupNavigation() {
                // Navigation items
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = item.getAttribute('data-section');
                        this.navigateToSection(section);
                    });
                });

                // Menu toggle
                const menuToggle = document.getElementById('menuToggle');
                const navigation = document.getElementById('navigation');
                
                if (menuToggle && navigation) {
                    menuToggle.addEventListener('click', () => {
                        navigation.classList.toggle('open');
                    });
                }
            }

            navigateToSection(sectionName) {
                console.log(`ЁЯУН Navigate to: ${sectionName}`);
                
                this.currentSection = sectionName;
                
                // Update navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('data-section') === sectionName) {
                        item.classList.add('active');
                    }
                });
                
                // Show section
                document.querySelectorAll('.content-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                const targetSection = document.getElementById(sectionName + 'Section');
                if (targetSection) {
                    targetSection.classList.add('active');
                    this.loadSectionContent(sectionName);
                }
            }

            loadSectionContent(sectionName) {
                switch (sectionName) {
                    case 'home':
                        this.loadHomeContent();
                        break;
                    case 'languages':
                        this.loadLanguagesContent();
                        break;
                    case 'learn':
                        this.loadLearningContent();
                        break;
                    case 'progress':
                        this.loadProgressContent();
                        break;
                }
            }

            loadHomeContent() {
                console.log('ЁЯПа Loading home content...');
                
                // Load quick actions
                const quickActions = document.getElementById('quickActions');
                if (quickActions) {
                    quickActions.innerHTML = `
                        <div class="quick-action" onclick="app.showQuickPhrases('emergency')">
                            <div class="action-icon">ЁЯЪи</div>
                            <div class="action-text">ржЬрж░рзБрж░рж┐ ржЕржмрж╕рзНржерж╛</div>
                        </div>
                        <div class="quick-action" onclick="app.showQuickPhrases('daily')">
                            <div class="action-icon">ЁЯТм</div>
                            <div class="action-text">ржжрзИржиржирзНржжрж┐ржи ржХржерж╛</div>
                        </div>
                        <div class="quick-action" onclick="app.showQuickPhrases('work')">
                            <div class="action-icon">ЁЯТ╝</div>
                            <div class="action-text">ржХрж╛ржЬрзЗрж░ ржнрж╛рж╖рж╛</div>
                        </div>
                        <div class="quick-action" onclick="app.showQuickPhrases('travel')">
                            <div class="action-icon">тЬИя╕П</div>
                            <div class="action-text">ржнрзНрж░ржоржг</div>
                        </div>
                    `;
                }

                // Load popular languages
                const popularLanguages = document.getElementById('popularLanguages');
                if (popularLanguages) {
                    popularLanguages.innerHTML = `
                        <div class="language-card" onclick="app.selectLanguage('germany')">
                            <div class="language-flag">ЁЯЗйЁЯЗк</div>
                            <div class="language-name">ржЬрж╛рж░рзНржорж╛ржи</div>
                            <div class="language-country">ржЬрж╛рж░рзНржорж╛ржирж┐</div>
                        </div>
                        <div class="language-card" onclick="app.selectLanguage('france')">
                            <div class="language-flag">ЁЯЗлЁЯЗ╖</div>
                            <div class="language-name">ржлрж░рж╛рж╕рж┐</div>
                            <div class="language-country">ржлрзНрж░рж╛ржирзНрж╕</div>
                        </div>
                        <div class="language-card" onclick="app.selectLanguage('italy')">
                            <div class="language-flag">ЁЯЗоЁЯЗ╣</div>
                            <div class="language-name">ржЗрждрж╛рж▓рж┐ржпрж╝рж╛ржи</div>
                            <div class="language-country">ржЗрждрж╛рж▓рж┐</div>
                        </div>
                        <div class="language-card" onclick="app.selectLanguage('spain')">
                            <div class="language-flag">ЁЯЗкЁЯЗ╕</div>
                            <div class="language-name">рж╕рзНржкрзНржпрж╛ржирж┐рж╢</div>
                            <div class="language-country">рж╕рзНржкрзЗржи</div>
                        </div>
                    `;
                }
            }

            loadLanguagesContent() {
                console.log('ЁЯМН Loading languages...');
                
                const languagesGrid = document.getElementById('languagesGrid');
                if (languagesGrid) {
                    languagesGrid.innerHTML = `
                        <div class="language-card detailed" onclick="app.selectLanguage('germany')">
                            <div class="language-header">
                                <div class="language-flag">ЁЯЗйЁЯЗк</div>
                                <div class="language-info">
                                    <h3>ржЬрж╛рж░рзНржорж╛ржи</h3>
                                    <p>Deutsch</p>
                                    <p>ржЬрж╛рж░рзНржорж╛ржирж┐</p>
                                </div>
                                <div class="priority-badge">ржЬржиржкрзНрж░рж┐ржпрж╝</div>
                            </div>
                            <div class="language-stats">
                                <div>ржЬржирж╕ржВржЦрзНржпрж╛: 83M</div>
                                <div>рж╢ржмрзНржж: 5,284</div>
                                <div>ржХржарж┐ржирждрж╛: ржоржзрзНржпржо</div>
                            </div>
                        </div>
                        
                        <div class="language-card detailed" onclick="app.selectLanguage('france')">
                            <div class="language-header">
                                <div class="language-flag">ЁЯЗлЁЯЗ╖</div>
                                <div class="language-info">
                                    <h3>ржлрж░рж╛рж╕рж┐</h3>
                                    <p>Fran├зais</p>
                                    <p>ржлрзНрж░рж╛ржирзНрж╕</p>
                                </div>
                                <div class="priority-badge">ржЬржиржкрзНрж░рж┐ржпрж╝</div>
                            </div>
                            <div class="language-stats">
                                <div>ржЬржирж╕ржВржЦрзНржпрж╛: 68M</div>
                                <div>рж╢ржмрзНржж: 5,156</div>
                                <div>ржХржарж┐ржирждрж╛: ржоржзрзНржпржо</div>
                            </div>
                        </div>
                        
                        <div class="language-card detailed" onclick="app.selectLanguage('italy')">
                            <div class="language-header">
                                <div class="language-flag">ЁЯЗоЁЯЗ╣</div>
                                <div class="language-info">
                                    <h3>ржЗрждрж╛рж▓рж┐ржпрж╝рж╛ржи</h3>
                                    <p>Italiano</p>
                                    <p>ржЗрждрж╛рж▓рж┐</p>
                                </div>
                                <div class="priority-badge">ржЬржиржкрзНрж░рж┐ржпрж╝</div>
                            </div>
                            <div class="language-stats">
                                <div>ржЬржирж╕ржВржЦрзНржпрж╛: 60M</div>
                                <div>рж╢ржмрзНржж: 4,987</div>
                                <div>ржХржарж┐ржирждрж╛: рж╕рж╣ржЬ</div>
                            </div>
                        </div>
                    `;
                }

                // Setup filters
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        
                        const filter = btn.getAttribute('data-filter');
                        console.log('Filter:', filter);
                    });
                });
            }

            loadLearningContent() {
                console.log('ЁЯУЪ Loading learning...');
                
                // Populate language select
                const languageSelect = document.getElementById('languageSelect');
                if (languageSelect) {
                    languageSelect.innerHTML = `
                        <option value="">ржПржХржЯрж┐ ржнрж╛рж╖рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи...</option>
                        <option value="germany">ЁЯЗйЁЯЗк ржЬрж╛рж░рзНржорж╛ржи (ржЬрж╛рж░рзНржорж╛ржирж┐)</option>
                        <option value="france">ЁЯЗлЁЯЗ╖ ржлрж░рж╛рж╕рж┐ (ржлрзНрж░рж╛ржирзНрж╕)</option>
                        <option value="italy">ЁЯЗоЁЯЗ╣ ржЗрждрж╛рж▓рж┐ржпрж╝рж╛ржи (ржЗрждрж╛рж▓рж┐)</option>
                        <option value="spain">ЁЯЗкЁЯЗ╕ рж╕рзНржкрзНржпрж╛ржирж┐рж╢ (рж╕рзНржкрзЗржи)</option>
                        <option value="netherlands">ЁЯЗ│ЁЯЗ▒ ржбрж╛ржЪ (ржирзЗржжрж╛рж░рж▓рзНржпрж╛ржирзНржбрж╕)</option>
                        <option value="poland">ЁЯЗ╡ЁЯЗ▒ ржкрзЛрж▓рж┐рж╢ (ржкрзЛрж▓рзНржпрж╛ржирзНржб)</option>
                        <option value="russia">ЁЯЗ╖ЁЯЗ║ рж░рзБрж╢ (рж░рж╛рж╢рж┐ржпрж╝рж╛)</option>
                    `;
                    
                    languageSelect.addEventListener('change', (e) => {
                        if (e.target.value) {
                            this.selectLanguage(e.target.value);
                        }
                    });
                }
            }

            loadProgressContent() {
                console.log('ЁЯУК Loading progress...');
                
                const progressContent = document.getElementById('progressContent');
                if (progressContent) {
                    progressContent.innerHTML = `
                        <div class="progress-cards">
                            <div class="progress-card">
                                <h3>ржЖржЬржХрзЗрж░ рж▓ржХрзНрж╖рзНржп</h3>
                                <div class="progress-number">0/15</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <div class="progress-card">
                                <h3>ржорзЛржЯ рж╢рж┐ржЦрзЗржЫрж┐</h3>
                                <div class="progress-number">0</div>
                                <p>рж╢ржмрзНржж ржУ ржмрж╛ржХрзНржп</p>
                            </div>
                            
                            <div class="progress-card">
                                <h3>ржзрж╛рж░рж╛ржмрж╛рж╣рж┐ржХрждрж╛</h3>
                                <div class="progress-number">0</div>
                                <p>ржжрж┐ржи</p>
                            </div>
                        </div>
                    `;
                }
            }

            selectLanguage(languageKey) {
                console.log(`ЁЯОп Selected language: ${languageKey}`);
                
                this.currentLanguage = languageKey;
                
                // Update language select
                const languageSelect = document.getElementById('languageSelect');
                if (languageSelect) {
                    languageSelect.value = languageKey;
                }
                
                // Show learning interface
                const learningInterface = document.getElementById('learningInterface');
                const languageSelection = document.getElementById('languageSelection');
                
                if (learningInterface && languageSelection) {
                    languageSelection.style.display = 'none';
                    learningInterface.classList.remove('hidden');
                    
                    // Update language info
                    const languages = {
                        germany: { flag: 'ЁЯЗйЁЯЗк', name: 'ржЬрж╛рж░рзНржорж╛ржи', country: 'ржЬрж╛рж░рзНржорж╛ржирж┐' },
                        france: { flag: 'ЁЯЗлЁЯЗ╖', name: 'ржлрж░рж╛рж╕рж┐', country: 'ржлрзНрж░рж╛ржирзНрж╕' },
                        italy: { flag: 'ЁЯЗоЁЯЗ╣', name: 'ржЗрждрж╛рж▓рж┐ржпрж╝рж╛ржи', country: 'ржЗрждрж╛рж▓рж┐' },
                        spain: { flag: 'ЁЯЗкЁЯЗ╕', name: 'рж╕рзНржкрзНржпрж╛ржирж┐рж╢', country: 'рж╕рзНржкрзЗржи' }
                    };
                    
                    const lang = languages[languageKey];
                    if (lang) {
                        document.getElementById('currentLanguageFlag').textContent = lang.flag;
                        document.getElementById('currentLanguageName').textContent = lang.name;
                    }
                    
                    // Load vocabulary
                    this.loadVocabulary(languageKey);
                }
                
                // Navigate to learn section
                this.navigateToSection('learn');
                this.showToast(`${languageKey} ржнрж╛рж╖рж╛ ржирж┐рж░рзНржмрж╛ржЪрж┐ржд рж╣ржпрж╝рзЗржЫрзЗ`, 'success');
            }

            loadVocabulary(languageKey) {
                const vocabularyList = document.getElementById('vocabularyList');
                if (!vocabularyList) return;
                
                // Sample vocabulary
                const sampleVocab = [
                    { original: 'Guten Tag', bengali: 'рж╢рзБржн ржжрж┐ржи', english: 'Good day', category: 'ржжрзИржиржирзНржжрж┐ржи' },
                    { original: 'Danke sch├╢n', bengali: 'ржзржирзНржпржмрж╛ржж', english: 'Thank you', category: 'ржжрзИржиржирзНржжрж┐ржи' },
                    { original: 'Entschuldigung', bengali: 'ржжрзБржГржЦрж┐ржд', english: 'Excuse me', category: 'ржжрзИржиржирзНржжрж┐ржи' },
                    { original: 'Hilfe!', bengali: 'рж╕рж╛рж╣рж╛ржпрзНржп!', english: 'Help!', category: 'ржЬрж░рзБрж░рж┐' },
                    { original: 'Wo ist...?', bengali: 'ржХрзЛржерж╛ржпрж╝...?', english: 'Where is...?', category: 'ржкрзНрж░рж╢рзНржи' }
                ];
                
                vocabularyList.innerHTML = sampleVocab.map(item => `
                    <div class="vocabulary-card">
                        <div class="vocab-header">
                            <span class="vocab-category">${item.category}</span>
                            <button class="vocab-audio" onclick="app.playAudio('${item.original}')">ЁЯФК</button>
                        </div>
                        <div class="vocab-original">${item.original}</div>
                        <div class="vocab-bengali">${item.bengali}</div>
                        <div class="vocab-english">${item.english}</div>
                        <div class="vocab-actions">
                            <button class="btn btn-small" onclick="app.markLearned(this)">тЬУ рж╢рж┐ржЦрзЗржЫрж┐</button>
                            <button class="btn btn-outline btn-small" onclick="app.addToFavorites('${item.original}')">тЭдя╕П</button>
                        </div>
                    </div>
                `).join('');
            }

            showQuickPhrases(category) {
                console.log(`тЪб Quick phrases: ${category}`);
                this.showToast(`${category} ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐рж░ ржлрзНрж░рзЗржЬ ржжрзЗржЦрж╛ржирзЛ рж╣ржЪрзНржЫрзЗ`, 'info');
            }

            playAudio(text) {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'de-DE';
                    speechSynthesis.speak(utterance);
                }
            }

            markLearned(button) {
                button.textContent = 'тЬЕ рж╢рж┐ржЦрзЗржЫрж┐!';
                button.disabled = true;
                button.style.background = '#2ed573';
                
                // Update today's progress
                const todayLearned = document.getElementById('todayLearned');
                if (todayLearned) {
                    const current = parseInt(todayLearned.textContent) || 0;
                    todayLearned.textContent = current + 1;
                }
                
                this.showToast('рж╢ржмрзНржжржЯрж┐ рж╢рзЗржЦрж╛ рж╣рж┐рж╕рзЗржмрзЗ ржЪрж┐рж╣рзНржирж┐ржд рж╣ржпрж╝рзЗржЫрзЗ', 'success');
            }

            addToFavorites(text) {
                console.log(`тЭдя╕П Added to favorites: ${text}`);
                this.showToast('ржкржЫржирзНржжрзЗрж░ рждрж╛рж▓рж┐ржХрж╛ржпрж╝ ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ', 'success');
            }

            setupThemeToggle() {
                const themeToggle = document.getElementById('themeToggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', () => {
                        document.body.classList.toggle('dark-theme');
                        const isDark = document.body.classList.contains('dark-theme');
                        themeToggle.textContent = isDark ? 'тШАя╕П' : 'ЁЯМЩ';
                        
                        localStorage.setItem('theme', isDark ? 'dark' : 'light');
                    });
                    
                    // Load saved theme
                    const savedTheme = localStorage.getItem('theme');
                    if (savedTheme === 'dark') {
                        document.body.classList.add('dark-theme');
                        themeToggle.textContent = 'тШАя╕П';
                    }
                }
            }

            showToast(message, type = 'info') {
                const toastContainer = document.getElementById('toastContainer');
                if (!toastContainer) return;
                
                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                toast.textContent = message;
                
                toastContainer.appendChild(toast);
                
                // Auto remove
                setTimeout(() => {
                    toast.remove();
                }, 3000);
            }

            handleError() {
                document.getElementById('loadingScreen').innerHTML = `
                    <div class="loading-content">
                        <div class="error-icon">тЪая╕П</div>
                        <h1>рж▓рзЛржб ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛</h1>
                        <p>ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж▓рзЛржб ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
                        <button onclick="location.reload()" class="btn btn-primary">ЁЯФД ржкрзЗржЬ рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рзБржи</button>
                    </div>
                `;
            }
        }

        // Initialize app
        let app;
        
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                app = new SpeakEU();
                await app.init();
                window.app = app; // Make globally accessible
                
                console.log('тЬЕ Speak EU initialized successfully');
            } catch (error) {
                console.error('тЭМ Failed to initialize:', error);
                
                // Show error message
                document.body.innerHTML = `
                    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column; text-align: center; padding: 20px; background: #f8f9fa;">
                        <h1 style="color: #ff4757; margin-bottom: 20px;">тЪая╕П рж▓рзЛржб ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛</h1>
                        <p style="margin-bottom: 20px; color: #555;">ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж▓рзЛржб ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
                        <button onclick="location.reload()" style="padding: 12px 24px; background: #3742fa; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">
                            ЁЯФД ржкрзЗржЬ рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рзБржи
                        </button>
                    </div>
                `;
            }
        });

        // PWA Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => console.log('тЬЕ SW registered'))
                    .catch(error => console.log('тЭМ SW failed'));
            });
        }
    </script>
</body>
</html>
