<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Speak Eu - বাসা প্র্যাকটিস ও কুইজ</title>
<style>
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f9fbfd;
    color: #222;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    background: #003366;
    color: white;
    padding: 1.2rem 2rem;
    font-weight: 700;
    font-size: 1.8rem;
    text-align: center;
    box-shadow: 0 3px 6px rgba(0,0,0,0.15);
  }
  main {
    flex-grow: 1;
    max-width: 960px;
    margin: 1rem auto 2rem;
    padding: 1rem 2rem;
    background: white;
    border-radius: 12px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
  }
  .profile-section {
    margin-bottom: 1rem;
    background: #e6f0ff;
    border: 1px solid #a0c1ff;
    padding: 1rem 1.5rem;
    border-radius: 12px;
  }
  .profile-section h2 {
    margin: 0 0 0.5rem 0;
    color: #00205c;
  }
  select, input[type="text"] {
    width: 100%;
    max-width: 300px;
    padding: 0.5rem 0.8rem;
    border: 1.5px solid #0052cc;
    border-radius: 8px;
    font-size: 1rem;
    margin-bottom: 0.8rem;
  }
  button.save-btn, button.edit-profile-btn, button.submit-quiz-btn, button.retry-quiz-btn {
    background: #0052cc;
    color: white;
    border: none;
    padding: 0.7rem 1.5rem;
    font-weight: 700;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    max-width: 320px;
    user-select: none;
  }
  button.save-btn:hover, button.edit-profile-btn:hover, button.submit-quiz-btn:hover, button.retry-quiz-btn:hover {
    background: #003a99;
  }
  #profileMessage, #quizFeedback {
    margin-top: 0.75rem;
    font-weight: 700;
  }
  #profileMessage {
    color: #007300;
  }
  #quizFeedback.correct {
    color: green;
  }
  #quizFeedback.incorrect {
    color: red;
  }
  .table-container {
    margin-top: 1rem;
    border: 1px solid #ccc;
    border-radius: 10px;
    overflow-x: auto;
    max-height: 600px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    min-width: 700px;
  }
  th, td {
    padding: 0.8rem;
    text-align: left;
    border-bottom: 1px solid #ddd;
    vertical-align: top;
  }
  th {
    background-color: #f2f2f2;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  .quiz-container {
    max-width: 700px;
    margin: 1rem auto 0 auto;
  }
  .quiz-question {
    font-weight: 700;
    font-size: 1.15rem;
    margin-bottom: 1rem;
  }
  .quiz-options {
    list-style: none;
    padding: 0;
    margin-bottom: 1rem;
  }
  .quiz-options li {
    margin-bottom: 0.8rem;
  }
  .quiz-options label {
    display: block;
    cursor: pointer;
    background: #e7eaf6;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  .quiz-options input[type="radio"] {
    margin-right: 10px;
  }
  .quiz-options label:hover {
    background-color: #c8d4ff;
  }
  .user-info {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .user-profile-box {
    background: #f0f5ff;
    border: 1px solid #a0c1ff;
    border-radius: 12px;
    padding: 1rem 1.5rem;
    margin-bottom: 1rem;
    max-width: 360px;
  }
  .user-profile-box h3 {
    margin-top: 0; margin-bottom: 0.5rem;
    font-size: 1.2rem;
    color: #003366;
  }
  .user-profile-info {
    margin-bottom: 0.5rem;
  }
  /* Responsive */
  @media (max-width: 700px) {
    main {
      margin: 1rem;
      padding: 1rem;
      max-width: 100%;
    }
    .table-container {
      max-height: 400px;
    }
  }
</style>
</head>
<body>
<header>Speak Eu</header>
<main>
  <section id="profileSetupSection" class="profile-section" aria-label="প্রোফাইল সেটআপ">
    <h2>আপনার প্রোফাইল তৈরি করুন</h2>
    <input type="text" id="inputName" placeholder="আপনার নাম লিখুন" aria-label="নাম লিখুন" autocomplete="off" />
    <button id="btnSaveProfile" class="save-btn" aria-label="প্রোফাইল সংরক্ষণ করুন">সংরক্ষণ করুন</button>
    <div id="profileMessage" role="alert" aria-live="polite"></div>
  </section>

  <section id="profileViewSection" class="user-profile-box" aria-label="ব্যবহারকারীর প্রোফাইল" style="display:none;">
    <h3>আপনার প্রোফাইল</h3>
    <div class="user-profile-info"><strong>নাম:</strong> <span id="profileName"></span></div>
    <div class="user-profile-info"><strong>ব্যবহারকারী আইডি:</strong> <span id="profileUserId"></span></div>
    <button id="btnEditProfile" class="edit-profile-btn" aria-label="প্রোফাইল সম্পাদনা করুন">প্রোফাইল সম্পাদনা করুন</button>
  </section>

  <nav class="tabs" role="tablist" aria-label="অ্যাপ ট্যাব">
    <button role="tab" id="tabPractice" aria-selected="true" aria-controls="panelPractice" tabindex="0" class="active">বাসা প্র্যাকটিস</button>
    <button role="tab" id="tabQuiz" aria-selected="false" aria-controls="panelQuiz" tabindex="-1">কুইজ</button>
  </nav>

  <section id="panelPractice" class="tab-content" role="tabpanel" aria-labelledby="tabPractice" tabindex="0">
    <h2>বাসা প্র্যাকটিস - রাশিয়ান ভাষা</h2>
    <p>নীচের টেবিলে বাংলা ও রাশিয়ান ভাষার অপরিহার্য ও সাধারণ কথাবার্তা, উচ্চারণ ও ইংরেজি অর্থ দেখানো হয়েছে। উল্লেখ্য: ডেমো হিসেবে প্রথম ৩০টি বাক্য দেওয়া হয়েছে, সর্বমোট ২০০০ বাক্য ধারাবাহিকভাবে সংযোজন সম্ভব।</p>
    <div class="table-container" role="region" aria-label="বাসা প্র্যাকটিস কথাবার্তার টেবিল">
      <table>
        <thead>
          <tr>
            <th>বাংলা</th>
            <th>রাশিয়ান ভাষা</th>
            <th>উচ্চারণ (ইংরেজি)</th>
            <th>ইংরেজি অর্থ</th>
          </tr>
        </thead>
        <tbody id="practiceTableBody">
          <!-- Rows injected by JS -->
        </tbody>
      </table>
    </div>
  </section>

  <section id="panelQuiz" class="tab-content" role="tabpanel" aria-labelledby="tabQuiz" tabindex="0" hidden>
    <h2>কুইজ - রাশিয়ান ভাষা শেখার মূল্যায়ন</h2>
    <div class="quiz-container" role="region" aria-label="কুইজ প্রশ্ন ও উত্তর নির্বাচন">
      <p id="quizQuestion" class="quiz-question"></p>
      <ul id="quizOptions" class="quiz-options" role="radiogroup" aria-live="polite"></ul>
      <button id="btnSubmitQuiz" class="submit-quiz-btn" aria-label="উত্তর জমা দিন">জমা দিন</button>
      <button id="btnRetryQuiz" class="submit-quiz-btn" style="display:none; margin-left: 12px;" aria-label="আবার চেষ্টা করুন">আবার চেষ্টা করুন</button>
      <p id="quizFeedback" role="alert" aria-live="assertive"></p>
      <p id="quizScore" style="font-weight:700; margin-top:10px;"></p>
    </div>
  </section>
</main>

<script>
(() => {
  // Utility - generate random user ID of length 8 alpha-numeric
  function generateUserId() {
    return Math.random().toString(36).substr(2,8).toUpperCase();
  }

  // Data for 30 conversation phrases demo, expandable to 2000 externally
  const practicePhrases = [
    {bn:"কোথায় যাব?", ru:"Куда пойти?", pron:"Kuda poyti?", en:"Where to go?" },
    {bn:"কি করে যাব?", ru:"Как добраться?", pron:"Kak dobrat'sya?", en:"How to get there?" },
    {bn:"বাস কয়টায় ছাড়বে?", ru:"Во сколько отходит автобус?", pron:"Vo skol'ko otkhodit avtobus?", en:"What time does the bus leave?" },
    {bn:"হাসপাতাল কোথায়?", ru:"Где больница?", pron:"Gde bol'nitsa?", en:"Where is the hospital?" },
    {bn:"ভালো রেস্টুরেন্ট কোথায়?", ru:"Где хороший ресторан?", pron:"Gde khoroshiy restoran?", en:"Where is a good restaurant?" },
    {bn:"মসজিদ কোথায়?", ru:"Где мечеть?", pron:"Gde mechét'?", en:"Where is the mosque?" },
    {bn:"নামাজের সময় কখন?", ru:"Когда время намаза?", pron:"Kogda vremya namaza?", en:"What time is the prayer?" },
    {bn:"ইফতার কোথায়?", ru:"Где ифтар?", pron:"Gde iftar?", en:"Where is the iftar?" },
    {bn:"হালাল মাংস কোথায় পাব?", ru:"Где можно купить халяльное мясо?", pron:"Gde mozhno kupit' khalyal'noye myaso?", en:"Where can I find halal meat?" },
    {bn:"শপিংমল কোথায়?", ru:"Где торговый центр?", pron:"Gde torgovyy tsentr?", en:"Where is the shopping mall?" },
    {bn:"টিকেটের দাম কত?", ru:"Сколько стоит билет?", pron:"Skol'ko stoit bilet?", en:"How much is the ticket?" },
    {bn:"বাস স্টপ কোথায়?", ru:"Где автобусная остановка?", pron:"Gde avtobusnaya ostanovka?", en:"Where is the bus stop?" },
    {bn:"ট্যাক্সি কত দাম?", ru:"Сколько стоит такси?", pron:"Skol'ko stoit taksi?", en:"How much is the taxi?" },
    {bn:"আমি বাংলাদেশ থেকে এসেছি।", ru:"Я из Бангладеша.", pron:"Ya iz Bangladesha.", en:"I am from Bangladesh." },
    {bn:"আমি ইংরাজি বলতে পারি না।", ru:"Я не говорю по-английски.", pron:"Ya ne govoryu po-angliyski.", en:"I do not speak English." },
    {bn:"আপনি কি ইংরাজি বলতে পারেন?", ru:"Вы говорите по-английски?", pron:"Vy govorite po-angliyski?", en:"Do you speak English?" },
    {bn:"আমাকে সাহায্য করুন।", ru:"Помогите мне, пожалуйста.", pron:"Pomogite mne, pozhaluysta.", en:"Please help me." },
    {bn:"আমি রাস্তা হারিয়েছি।", ru:"Я потерялся.", pron:"Ya poteryalsya.", en:"I am lost." },
    {bn:"কতদূর?", ru:"Как далеко?", pron:"Kak daleko?", en:"How far?" },
    {bn:"আপনার নাম কী?", ru:"Как вас зовут?", pron:"Kak vas zovut?", en:"What is your name?" },
    {bn:"আমার নাম [নাম]।", ru:"Меня зовут [имя].", pron:"Menya zovut [imya].", en:"My name is [name]." },
    {bn:"আমি ঢাকায় থাকি।", ru:"Я живу в Даках.", pron:"Ya zhivu v Dakakh.", en:"I live in Dhaka." },
    {bn:"আমি ছাত্র/ছাত্রী।", ru:"Я студент/студентка.", pron:"Ya student/studentka.", en:"I am a student." },
    {bn:"আমি ইউরোপে ভ্রমণ করতে চাই।", ru:"Я хочу путешествовать по Европе.", pron:"Ya khochu puteshestvovat' po Yevrope.", en:"I want to travel in Europe." },
    {bn:"মাফ করবেন, এটা কতদূর?", ru:"Извините, как далеко это?", pron:"Izvinite, kak daleko eto?", en:"Excuse me, how far is this?" },
    {bn:"টাকা কোথায় বদলাতে পারি?", ru:"Где можно обменять деньги?", pron:"Gde mozhno obmenyat' den'gi?", en:"Where can I exchange money?" },
    {bn:"আপনি আমাকে সত্যি বলছেন?", ru:"Вы говорите правду?", pron:"Vy govorite pravdu?", en:"Are you telling me the truth?" },
    {bn:"আমি মসজিদ খুঁজছি।", ru:"Я ищу мечеть.", pron:"Ya ishchu mechet'.", en:"I am looking for a mosque." },
    {bn:"আমার বাসায় যাওয়ার রাস্তাটি দেখান।", ru:"Покажите дорогу в мой дом.", pron:"Pokazhi dorogu v moy dom.", en:"Show me the way to my home." },
    {bn:"আমি সাহায্য চাই।", ru:"Мне нужна помощь.", pron:"Mne nuzhna pomoshch'.", en:"I need help." }
  ];

  // Quiz Data: Simple 5 question quiz on phrases with answers
  const quizItems = [
    {
      question:"‘Where is the hospital?’ এর রাশিয়ান অনুবাদ কোনটি?",
      options:[
        "Где больница?",
        "Где ресторан?",
        "Где мечеть?",
        "Где автобус?"
      ],
      answer:"Где больница?"
    },
    {
      question:"‘I am from Bangladesh.’ এর রাশিয়ান অনুবাদ কোনটি?",
      options:[
        "Я из Пакистана.",
        "Я из Индии.",
        "Я из Бангладеша.",
        "Я из Китая."
      ],
      answer:"Я из Бангладеша."
    },
    {
      question:"‘How much is the taxi?’ এর রাশিয়ান উচ্চারণ কী?",
      options:[
        "Skol'ko stoit taksi?",
        "Kuda poyti?",
        "Gde bol'nitsa?",
        "Ya poteryalsya."
      ],
      answer:"Skol'ko stoit taksi?"
    },
    {
      question:"‘Show me the way to my home.’ এর বাংলা অনুবাদ কী?",
      options:[
        "আসুন আমার বাড়িতে।",
        "আমার বাসায় যাওয়ার রাস্তাটি দেখান।",
        "আমি বাসায় যাচ্ছি।",
        "আমার বাসা কোথায়?"
      ],
      answer:"আমার বাসায় যাওয়ার রাস্তাটি দেখান।"
    },
    {
      question:"‘Где мечеть?’ বাক্যের ইংরেজি অর্থ কী?",
      options:[
        "Where is the mosque?",
        "Where is the hospital?",
        "Where is the restaurant?",
        "Where is the bus?"
      ],
      answer:"Where is the mosque?"
    }
  ];

  // DOM Elements
  const profileSetupSection = document.getElementById("profileSetupSection");
  const profileViewSection = document.getElementById("profileViewSection");
  const inputName = document.getElementById("inputName");
  const btnSaveProfile = document.getElementById("btnSaveProfile");
  const profileMessage = document.getElementById("profileMessage");
  const profileNameSpan = document.getElementById("profileName");
  const profileUserIdSpan = document.getElementById("profileUserId");
  const btnEditProfile = document.getElementById("btnEditProfile");

  const tabPractice = document.getElementById("tabPractice");
  const tabQuiz = document.getElementById("tabQuiz");
  const panelPractice = document.getElementById("panelPractice");
  const panelQuiz = document.getElementById("panelQuiz");

  const practiceTableBody = document.getElementById("practiceTableBody");
  const quizQuestion = document.getElementById("quizQuestion");
  const quizOptions = document.getElementById("quizOptions");
  const btnSubmitQuiz = document.getElementById("btnSubmitQuiz");
  const btnRetryQuiz = document.createElement("button");
  const quizFeedback = document.getElementById("quizFeedback");
  const quizScore = document.getElementById("quizScore");

  // State
  let user = {
    name: "",
    userId: ""
  };
  let quizCurrentIndex = 0;
  let scores = 0;

  // LocalStorage Keys
  const LS_NAME_KEY = "speakEuUserName";
  const LS_ID_KEY = "speakEuUserId";

  // Initialization
  function init() {
    // Load profile from localStorage
    const storedName = localStorage.getItem(LS_NAME_KEY);
    const storedId = localStorage.getItem(LS_ID_KEY);
    if(storedName && storedId) {
      user.name = storedName;
      user.userId = storedId;
      showProfileView();
      loadPracticeTable();
    } else {
      showProfileSetup();
    }
  }

  // Show Profile Setup UI
  function showProfileSetup() {
    profileSetupSection.style.display = "block";
    profileViewSection.style.display = "none";
    clearQuiz();
    switchTab("practice");
  }

  // Show Profile View UI
  function showProfileView() {
    profileSetupSection.style.display = "none";
    profileViewSection.style.display = "block";
    profileNameSpan.textContent = user.name;
    profileUserIdSpan.textContent = user.userId;
    loadPracticeTable();
    clearQuiz();
    switchTab("practice");
  }

  // Save Profile Handler
  btnSaveProfile.onclick = () => {
    const nameVal = inputName.value.trim();
    if(!nameVal) {
      profileMessage.textContent = "দয়া করে নাম দিন।";
      profileMessage.style.color = "red";
      return;
    }
    user.name = nameVal;
    user.userId = generateUserId();
    localStorage.setItem(LS_NAME_KEY, user.name);
    localStorage.setItem(LS_ID_KEY, user.userId);
    profileMessage.textContent = "প্রোফাইল সফলভাবে তৈরি হয়েছে।";
    profileMessage.style.color = "green";
    setTimeout(() => {
      showProfileView();
    }, 800);
  };

  // Edit Profile Handler
  btnEditProfile.onclick = () => {
    inputName.value = user.name;
    profileMessage.textContent = "";
    showProfileSetup();
  };

  // Generate random userId
  function generateUserId() {
    return Math.random().toString(36).substr(2, 8).toUpperCase();
  }

  // Load practice data to table
  function loadPracticeTable() {
    practiceTableBody.innerHTML = "";
    practicePhrases.forEach(({bn, ru, pron, en}) => {
      const tr = document.createElement("tr");

      const tdBn = document.createElement("td");
      tdBn.textContent = bn;
      tr.appendChild(tdBn);

      const tdRu = document.createElement("td");
      tdRu.textContent = ru;
      tr.appendChild(tdRu);

      const tdPron = document.createElement("td");
      tdPron.textContent = pron;
      tr.appendChild(tdPron);

      const tdEn = document.createElement("td");
      tdEn.textContent = en;
      tr.appendChild(tdEn);

      practiceTableBody.appendChild(tr);
    });
  }

  // Quiz handlers and rendering
  function startQuiz() {
    quizCurrentIndex = 0;
    scores = 0;
    renderQuizQuestion();
    quizFeedback.textContent = "";
    quizScore.textContent = "";
    btnSubmitQuiz.style.display = "inline-block";
    if(btnRetryQuiz.parentNode) btnRetryQuiz.parentNode.removeChild(btnRetryQuiz);
  }

  // Render particular quiz question
  function renderQuizQuestion() {
    const quizItem = quizItems[quizCurrentIndex];
    if(!quizItem) {
      showQuizResult();
      return;
    }
    quizQuestion.textContent = quizItem.question;
    quizOptions.innerHTML = "";
    quizItem.options.forEach((option, i) => {
      const li = document.createElement("li");
      const input = document.createElement("input");
      const label = document.createElement("label");
      const optionId = "quizopt_"+i;
      input.type = "radio";
      input.name = "quizoption";
      input.id = optionId;
      input.value = option;
      label.setAttribute("for", optionId);
      label.textContent = option;
      li.appendChild(input);
      li.appendChild(label);
      quizOptions.appendChild(li);
    });
  }

  // Show quiz result
  function showQuizResult() {
    quizQuestion.textContent = "আপনি কুইজ শেষ করেছেন!";
    quizOptions.innerHTML = "";
    quizScore.textContent = `আপনার পয়েন্ট: ${scores} / ${quizItems.length}`;
    quizFeedback.textContent = "";
    btnSubmitQuiz.style.display = "none";
    // Show retry button
    btnRetryQuiz.textContent = "আবার চেষ্টা করুন";
    btnRetryQuiz.className = "submit-quiz-btn";
    btnRetryQuiz.setAttribute("aria-label", "আবার চেষ্টা করুন");
    btnRetryQuiz.onclick = () => {
      startQuiz();
    };
    if(!btnRetryQuiz.parentNode) {
      document.querySelector(".quiz-container").appendChild(btnRetryQuiz);
    }
  }

  // Submit answer handler
  btnSubmitQuiz.onclick = () => {
    const selectedOption = document.querySelector('input[name="quizoption"]:checked');
    if(!selectedOption) {
      quizFeedback.textContent = "অনুগ্রহ করে একটি উত্তর নির্বাচন করুন।";
      quizFeedback.className = "incorrect";
      return;
    }
    const quizItem = quizItems[quizCurrentIndex];
    if(selectedOption.value === quizItem.answer) {
      scores++;
      quizFeedback.textContent = "সঠিক উত্তর!";
      quizFeedback.className = "correct";
    } else {
      quizFeedback.textContent = `ভুল উত্তর। সঠিক উত্তর: ${quizItem.answer}`;
      quizFeedback.className = "incorrect";
    }
    quizCurrentIndex++;
    btnSubmitQuiz.style.display = "none";
    setTimeout(() => {
      quizFeedback.textContent = "";
      btnSubmitQuiz.style.display = "inline-block";
      renderQuizQuestion();
    }, 2000);
  };

  // Tabs logic
  function switchTab(tabName) {
    if(tabName === "practice") {
      tabPractice.classList.add("active");
      tabPractice.setAttribute("aria-selected", "true");
      tabPractice.tabIndex = 0;
      tabQuiz.classList.remove("active");
      tabQuiz.setAttribute("aria-selected", "false");
      tabQuiz.tabIndex = -1;
      panelPractice.hidden = false;
      panelQuiz.hidden = true;
    } else if(tabName === "quiz") {
      tabQuiz.classList.add("active");
      tabQuiz.setAttribute("aria-selected", "true");
      tabQuiz.tabIndex = 0;
      tabPractice.classList.remove("active");
      tabPractice.setAttribute("aria-selected", "false");
      tabPractice.tabIndex = -1;
      panelQuiz.hidden = false;
      panelPractice.hidden = true;
    }
  }

  tabPractice.addEventListener("click", () => switchTab("practice"));
  tabQuiz.addEventListener("click", () => switchTab("quiz"));

  // Initialize app
  init();

  // Start quiz if profile exists
  if(user.name && user.userId){
    startQuiz();
  }

</script>
</body>
</html>

